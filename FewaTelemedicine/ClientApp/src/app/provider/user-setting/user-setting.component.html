<style>
    .saveBtn:disabled {
        cursor: not-allowed;
        opacity: .6;
        background: red;
    }
</style>
<div class="fewa_header">
    <div class="row">
        <div class="col-12 col-md-6">
            <div class="pageTitle">
                <h1>Account Settings</h1>
            </div>
        </div>
        <div class="col-12 col-md-6 text-right">
            <ul>
                <li>
                    <div class="dropdown">
                        <div class="profileHeader dropdown-toggle" type="button" id="dropdownMenuButton"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <p *ngIf="(global.providerObj.name==null && providerObj.name==null)||(global.providerObj.name=='' && providerObj.name=='')">
                                Upload Profile</p>
                            <p> {{providerObj.nameTitle}}&nbsp;{{providerObj.name}}&nbsp;</p>
                            <div class="profilePic">
                                <img *ngIf="!providerObj.image" src="/assets/img/profilePic.jpg" class="img-fluid">
                                <img *ngIf="providerObj.image" class=" img-fluid" [src]="providerObj.image">
                            </div>
                        </div>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" routerLink="/provider/login">Logout</a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="fewa_sidemenu">
    <app-sidemenu></app-sidemenu>
</div>

<div class="main-content">
    <div class="row">
        <div class="col-12">
            <div class="userTabsMenu">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab"
                        aria-controls="v-pills-home" aria-selected="true">Profile</a>
                    <!-- <a class="nav-link" id="v-pills-addProvider-tab" data-toggle="pill" href="#v-pills-addProvider" role="tab" aria-controls="v-pills-addProvider" aria-selected="true">Add Provider</a>
                    <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false" (click)="loadEmailTemplate()">Configuration</a> -->
                    <a class="nav-link" id="v-pills-advice-tab" data-toggle="pill" href="#v-pills-advice" role="tab"
                        aria-controls="v-pills-advice" aria-selected="false">Advice</a>
                </div>
                <!-- Profile-->
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                        aria-labelledby="v-pills-home-tab">
                        <div class="fewa-title">
                            <h1>Update Profile</h1>
                        </div>
                        <div class="tab-forms" style="max-height:546px;">
                            <form [formGroup]="userForm">
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Name<span class="red-text">*</span></label>
                                            <div class="display-flex">
                                                <select name="" class="form-control wdt-30" id=""
                                                    formControlName="name_title">
                                                    <option>Dr.</option>
                                                    <option>Mr.</option>
                                                    <option>Mrs.</option>
                                                    <option>Miss.</option>
                                                    <option>Ms.</option>
                                                    <option>Other</option>
                                                </select>
                                                <div *ngIf="userFormControls.name_title.touched && userFormControls.name_title.invalid"
                                                    style="color: red;">
                                                    <div *ngIf="userFormControls.name_title.errors.required"> Title is
                                                        required.
                                                    </div>
                                                </div>

                                                <input type="text" class="form-control wdt-70" name="name"
                                                    formControlName="name">
                                                <div *ngIf="userFormControls.name.touched && userFormControls.name.invalid"
                                                    style="color:red;">
                                                    <div *ngIf="userFormControls.name.errors.required">Name is required.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Email<span class="red-text">*</span></label>
                                            <input type="email" class="form-control" name="email"
                                                formControlName="email">
                                            <div *ngIf="userFormControls.email.touched && userFormControls.email.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.email.errors.required">Email is required.
                                                </div>
                                                <div *ngIf="userFormControls.email.errors.pattern">Invalid Email
                                                    Address.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Phone<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="mobileNumber"
                                                formControlName="phone">
                                            <div *ngIf="userFormControls.phone.touched && userFormControls.phone.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.phone.errors.required">Mobile Number is
                                                    required.
                                                </div>
                                                <div *ngIf="userFormControls.phone.errors.pattern">Invalid mobile
                                                    number.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Designation<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="designation"
                                                formControlName="designation">
                                            <div *ngIf="userFormControls.designation.touched && userFormControls.designation.invalid"
                                                style="color:red;">
                                                <div *ngIf="userFormControls.designation.errors.required">Designation is
                                                    required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Medical degree<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="medical_degree"
                                                formControlName="medical_degree">
                                            <div *ngIf="userFormControls.medical_degree.touched && userFormControls.medical_degree.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.medical_degree.errors.required">Medical
                                                    Degree is required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <!-- <div class="form-group">
                                            <label>Affiliated Hospital or Clinic</label>
                                            <input type="email" class="form-control" name="clinic"
                                                formControlName="clinic">
                                            <div *ngIf="userFormControls.clinic.touched && userFormControls.clinic.invalid" style="color: red;">
                                                <div *ngIf="userFormControls.clinic.errors.required">Clinic is required.</div>
                                            </div>
                                        </div> -->
                                        <div class="form-group">
                                            <label>Profile Image</label>
                                            <input id="file-upload1" class="form-control" type="file"
                                                placeholder="Choose File" formControlName="profile_image"
                                                (change)="onFileChanged($event)" accept=".png,.jpg,.jpeg" />
                                            <div *ngIf="userFormControls.profile_image.touched && userFormControls.profile_image.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.profile_image.errors.required">Image is
                                                    required.
                                                </div>
                                            </div>
                                            <div *ngIf="userFormControls.profile_image.touched && userFormControls.profile_image.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.profile_image.errors.required">Image is
                                                    required.
                                                </div>
                                            </div>
                                            <label *ngIf="selectedFile"> {{selectedFile.name}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <!-- <div class="form-group">
                                            <label>Profile Image</label>
                                            <input id="file-upload1" class="form-control" type="file"
                                                placeholder="Choose File" formControlName="profile_image"
                                                (change)="onFileChanged($event)" />
                                            <div *ngIf="userFormControls.profile_image.touched && userFormControls.profile_image.invalid"
                                                style="color: red;">
                                                <div *ngIf="userFormControls.profile_image.errors.required">Image is required.</div>
                                            </div>
                                            <label *ngIf="selectedFile"> {{selectedFile.name}}</label>
                                            <span class="upload" *ngIf="progress > 0">
                                                {{progress}}%
                                            </span>
                                            <span class="upload" *ngIf="message">
                                                {{message}}
                                            </span>
                                        </div> -->
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6">

                                    </div>
                                    <div class="col-12 col-md-6 text-right">
                                        <ul>
                                            <li><button type="submit" (click)="resetUserForm()"
                                                    class="cancelBtn">Cancel</button></li>
                                            <li><button type="submit"
                                                    [disabled]="!userForm.valid || this.fileLimitExceeded"
                                                    (click)="updateProfile()" class="saveBtn">Save</button></li>
                                        </ul>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Configuration -->
                    <!-- <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                        <div class="fewa-title">
                            <h1>Update Configuration</h1>
                        </div>
                        <div class="tab-forms">
                            <form [formGroup]="practiceConfigForm">
                                <h2>Practice Details :</h2>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Practice Name<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="hospital_name" formControlName="hospital_name" />
                                            <div *ngIf="practiceFormControls.hospital_name.touched && practiceFormControls.hospital_name.invalid" style="color: red;">
                                                <div *ngIf="practiceFormControls.hospital_name.errors.required">
                                                    Practice Name is required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Practice Contact No.<span class="red-text">*</span></label>
                                            <input type="text" placeholder="Enter Contact No" class="form-control" name="hospital_contact"
                                                formControlName="hospital_contact"> -->
                    <!-- <div *ngIf="practiceConfigForm.controls['hospital_contact'].hasError('pattern')"style="color: red;">Enter 10 digit Contact No.</div> -->
                    <!-- <div *ngIf="practiceFormControls.hospital_contact.touched && practiceFormControls.hospital_contact.invalid"
                                                style="color: red;">
                                                <div *ngIf="practiceFormControls.hospital_contact.errors.required">
                                                    Practice Contact is required.</div>
                                            </div>
                                        </div> -->
                    <!-- <div class="form-group">
                                            <label>Hospital Email</label>
                                            <input type="email" class="form-control" name="email" formControlName="hospital_email" />
                                        </div> -->
                    <!-- </div>
                                </div>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Practice Logo (Optional)</label>
                                        </div>
                                        <input id="file-upload1" type="file" formControlName="hospital_logo" (change)="updatePracticeLogo($event.target.files)" accept=".png,.jpg,.jpeg" />
                                        <label *ngIf="logoToUpload">{{logoToUpload.name}}</label>
                                        <span class="upload" *ngIf="logoProgress > 0">
                                            {{logoProgress}}%
                                        </span>
                                        <span class="upload" *ngIf="logoMessage">
                                            {{logoMessage}}
                                        </span>
                                    </div>

                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Practice Description</label>
                                            <textarea rows="4" class="form-control" name="hospital_description" formControlName="hospital_description"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <h2>Email Details: </h2>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Sender Email Id for Invitation<span class="red-text">*</span></label>
                                            <input type="email" class="form-control" name="sender_email" formControlName="sender_email" />
                                            <div *ngIf="practiceFormControls.sender_email.touched && practiceFormControls.sender_email.invalid" style="color: red;">
                                                <div *ngIf="practiceFormControls.sender_email.errors.required">Email is required.
                                                </div>
                                                <div *ngIf="practiceFormControls.sender_email.errors.pattern">Invalid Email Address.</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Email API Key<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="email_api_key" formControlName="email_api_key" />
                                            <div *ngIf="practiceFormControls.email_api_key.touched && practiceFormControls.email_api_key.invalid" style="color: red;">
                                                <div *ngIf="practiceFormControls.email_api_key.errors.required">Email API Key is required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                    <!-- <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Email Name<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="email_name" formControlName="email_name" />
                                            <div *ngIf="practiceFormControls.email_name.touched && practiceFormControls.email_name.invalid" style="color: red;">
                                                <div *ngIf="practiceFormControls.email_name.errors.required">Email Name is required.</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Video Call Platform<span class="red-text">*</span></label>
                                            <div>
                                                <div class="custom-control custom-radio custom-control-inline">
                                                    <input formControlName="calling_platform" type="radio" value="Jitsi" name="calling_platform" id="Jitsi" class="custom-control-input">
                                                    <label class="custom-control-label" for="Jitsi">Jitsi</label>
                                                </div>
                                                <div class="custom-control custom-radio custom-control-inline">
                                                    <input formControlName="calling_platform" type="radio" value="Tokbox" id="Tokbox" name="calling_platform" class="custom-control-input">
                                                    <label class="custom-control-label" for="Tokbox">Tokbox</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->
                    <!-- <div class="row">
                                    <div class="col-12">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <button type="submit" class="button-theme" (click)="loadInvitationTemplate()">Edit Invitation Email
                                                        Template </button>
                                                </div>
                                            </div>
                                            <div style="border:1px solid black;margin-top:3% !important" *ngIf="showInvitationTemplate">
                                                <p *ngIf="!showEditor" style="height:auto;pointer-events:none;padding-top:2% !important" id="content" [innerHTML]="emailTemplateUrl()">
                                                </p>
                                                <div *ngIf="showEditor" style="margin:4%;">
                                                    <angular-editor formControlName="addContent" [(ngModel)]="practiceObj.emailAdditionalContent" [config]="config"></angular-editor>
                                                </div>
                                                <div class="row">
                                                    <div class="col-12 col-md-8">

                                                    </div>
                                                    <div class="col-12 col-md-4 text-right mt-2 mb-2 pr-5">
                                                        <button *ngIf="!showEditor" (click)="editTemplate()" class="cancelBtn" style="border-style:dashed;"><svg
                                                                xmlns="http://www.w3.org/2000/svg" width="24"
                                                                height="24" viewBox="0 0 24 24" fill="none"
                                                                stroke="#000000" stroke-width="2" stroke-linecap="round"
                                                                stroke-linejoin="round">
                                                                <path
                                                                    d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34">
                                                                </path>
                                                                <polygon points="18 2 22 6 12 16 8 16 8 12 18 2">
                                                                </polygon>
                                                            </svg> Edit Template
                                                        </button>
                                                        <button *ngIf="showEditor" (click)="previewEmailTemplate()" class="saveBtn" style="border-style:dashed;">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                                height="24" viewBox="0 0 24 24" fill="none"
                                                                stroke="#000000" stroke-width="2" stroke-linecap="round"
                                                                stroke-linejoin="round">
                                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z">
                                                                </path>
                                                                <circle cx="12" cy="12" r="3"></circle>
                                                            </svg>
                                                            Preview Changes
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-12 col-md-6">

                                    </div>
                                    <div class="col-12 col-md-6 text-right">
                                        <ul>
                                            <li><button class="cancelBtn" (click)="resetPracticeForm()">Cancel</button>
                                            </li>
                                            <li><button class="saveBtn" [disabled]="!practiceConfigForm.valid" (click)="updatePracticeConfiguration()">Save</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div> -->

                    <!-- Advice -->
                    <div class="tab-pane fade" id="v-pills-advice" role="tabpanel" aria-labelledby="v-pills-advice-tab">
                        <div class="fewa-title">
                            <h1>Update Advice</h1>
                        </div>
                        <div class="tab-forms">
                            <form [formGroup]="adviceForm">
                                <table class="table table-bordered" style="width:100%;text-align:center;">
                                    <thead>
                                        <tr>
                                            <th>
                                                Sr. No
                                            </th>
                                            <th>
                                                Advice
                                            </th>
                                            <th>
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody formArrayName="adviceArray">
                                        <tr *ngFor="let array of adviceArray.controls; let i=index" [formGroupName]="i">
                                            <td>
                                                {{i+1}}
                                            </td>
                                            <td>
                                                <input type="text" class="form-control disable" name="advice"
                                                    formControlName="advice" />
                                            </td>
                                            <td>
                                                <a (click)="editRow(i)" href="javascript:;">
                                                    <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" width="28px" height="28px">
                                                        <path
                                                            d="M14.5 5.5L3 17 3 21 7 21 18.5 9.5zM21.707 4.879l-2.586-2.586c-.391-.391-1.024-.391-1.414 0L16 4l4 4 1.707-1.707C22.098 5.902 22.098 5.269 21.707 4.879z" />
                                                    </svg>
                                                </a>
                                                &nbsp;&nbsp;
                                                <a (click)="removeRow(i)" href="javascript:;">
                                                    <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" width="28px" height="28px">
                                                        <path
                                                            d="M 10 2 L 9 3 L 4 3 L 4 5 L 20 5 L 20 3 L 15 3 L 14 2 L 10 2 z M 5 7 L 5 20 C 5 21.1 5.9 22 7 22 L 17 22 C 18.1 22 19 21.1 19 20 L 19 7 L 5 7 z M 8 9 L 10 9 L 10 20 L 8 20 L 8 9 z M 14 9 L 16 9 L 16 20 L 14 20 L 14 9 z" />
                                                    </svg>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tbody>
                                        <tr>
                                            <td colspan="3">
                                                <button type="button" class="button-theme" style="width:100%;"
                                                    (click)="addRow()">
                                                    Add New Advice
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="row" style="margin-top:3% !important;">
                                    <div class="col-12 col-md-6">

                                    </div>
                                    <div class="col-12 col-md-6 text-right">
                                        <ul>
                                            <li><button class="cancelBtn" (click)="resetAdviceForm()">Cancel</button>
                                            </li>
                                            <li><button class="saveBtn"
                                                    [disabled]="!adviceForm.valid || adviceArray.length == 0"
                                                    (click)="saveAdvice()">Save</button>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Add Provider -->
                    <!-- <div class="tab-pane fade" id="v-pills-addProvider" role="tabpanel" aria-labelledby="v-pills-addProvider-tab">
                        <div class="fewa-title">
                            <h1>Add Provider</h1>
                        </div>
                        <div class="tab-forms" style="max-height:546px;">
                            <form [formGroup]="addProviderForm">
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>User Name<span class="red-text">*</span></label>
                                            <input type="text" class="form-control" name="userName" formControlName="userName">
                                            <div *ngIf="addProviderFormControls.userName.touched && addProviderFormControls.userName.invalid" style="color: red;">
                                                <div *ngIf="addProviderFormControls.userName.errors.required">User Name is required.
                                                </div> -->
                    <!-- <div *ngIf="userFormControls.userName.errors.pattern">Invalid mobile
                                                    number.</div> -->
                    <!-- </div>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="form-group">
                                            <label>Password<span class="red-text">*</span></label>
                                            <input type="password" class="form-control" name="password" formControlName="password">
                                            <div *ngIf="addProviderFormControls.password.touched && addProviderFormControls.password.invalid" style="color:red;">
                                                <div *ngIf="addProviderFormControls.password.errors.required">Password is required.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12 col-md-6">

                                    </div>
                                    <div class="col-12 col-md-6 text-right">
                                        <ul>
                                            <li><button type="submit" (click)="resetAddProviderForm()" class="cancelBtn">Reset</button></li>
                                            <li><button type="submit" [disabled]="!addProviderForm.valid" (click)="addProvider()" class="saveBtn">Save</button></li>
                                        </ul>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div> -->

                </div>
            </div>
        </div>
    </div>
</div>
